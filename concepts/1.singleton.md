# 1. Singleton Pattern

**"The Highlander Pattern: There can be only one."**

## Definition
The **Singleton Pattern** ensures that a class has only **one instance** and provides a **global point of access** to it. This is useful for managing shared resources like database connections, loggers, or configuration managers.

---

## üîç The "Lens": When to use this pattern?

Use these lenses to identify when you need a Singleton:

### 1. The "Heavy Resource" Lens
**Trigger:** You have an object that takes 500ms+ to start up (e.g., Database Connection, AI Model Loader).
*   **Risk:** Creating `new Database()` on every request will crash your server or slow it down to a crawl.
*   **Solution:** Use a Singleton. One connection, shared by everyone.

### 2. The "Global State" Lens
**Trigger:** You need a "Single Source of Truth" that everyone agrees on (e.g., Configuration Manager, Logger).
*   **Risk:** If Component A loads config from file, and Component B loads it again, they might get different values if the file changed.
*   **Solution:** A Singleton `ConfigManager` ensures everyone reads the exact same values from memory.

### 3. The "Hardware Access" Lens
**Trigger:** You are controlling a physical device (Printer, Serial Port).
*   **Risk:** Two threads writing to the printer at the same time results in garbage output.
*   **Solution:** Singleton ensures sequential access to the resource.

---

## ‚öñÔ∏è Pros & Cons

| Pros | Cons |
| :--- | :--- |
| **Controlled Access**: Strict control over how and when clients access the instance. | **Global State**: Global variables are notoriously hard to debug. |
| **Resource Saving**: Avoids value-less re-creation of heavy objects. | **Testing Difficulty**: Difficult to mock/stub in unit tests because the state persists between tests. |
| **Lazy Loading**: Can be initialized only when strictly needed. | **Concurrency Issues**: In multi-threaded environments, special care is needed to prevent race conditions during creation. |

---

## Real-World Use Case in This Repo
In `src/container/service.container.ts`, the `ServiceFactory` class uses the Singleton pattern. It ensures that the entire application shares a single factory instance to manage services, preventing duplicate service initialization.

---

## Challenge: Basic Singleton
**Goal:** Create a `DatabaseConnection` singleton in `src/1.singleton.practice.ts`.

1.  Create a class `DatabaseConnection`.
2.  Ensure that `new` is disabled (private constructor).
3.  Implement `getInstance()` that returns the same instance every time.
